{% extends 'base.html' %} 

{% block seccion %}
{% if form.instance.pk %}
  Modificar proyecto
{% else %}
  Agregar proyecto
{% endif %}
{% endblock seccion %}

{% block opciones %}
<li><a href="{% url 'proyectos:lista' %}"><i class="material-icons left">arrow_back</i> Volver</a></li>
  {% if form.instance.pk %}
  <li><a id="eliminar" data-target="{% url 'proyectos:eliminar' form.instance.pk %}">
    {% if form.instance.estado %}
    <i class="material-icons left">block</i> Inactivar</a>
    {% else %}
    <i class="material-icons left">check</i> Activar</a>
    {% endif %}
  </li>
  {% endif %}
{% endblock opciones %}

{% block body %}
  <form method="POST" enctype='multipart/form-data'>
    {% csrf_token %}
    <div class="row col s6 m12">
      <div class="col s3 m6">
        <div class="col s1 m1">
         <i class="material-icons prefix">account_circle</i>
         </div>
         <div class="col s2 m11">
            {% with form.nombre as input %}
            <!-- input = form.nombre -->
              {% include 'includes/input.html' %} 
            {% endwith %}
            </div>
            </div>
             <div class="col m6">
                <div class="file-field input-field">
                  <!--<div class="btn">
                    <span>Imagen</span>
                    <input type="file">
                    </div>-->
                    <!--{% with form.imagen as input %}
                     {% include 'includes/input.html' %} 
                   {% endwith %}-->
                     <form action="#">
                        <div class="file-field input-field">
                          <div class="btn">
                            <span>File</span>
                            <input type="file" multiple>
                          </div>
                          <div class="file-path-wrapper">
                            <input class="file-path validate" type="text" placeholder="Upload one or more files">
                          </div>
                        </div>
                    </form>
                    <!--<div class="file-path-wrapper">
                      <input class="file-path validate" type="text">
                      </div>-->
                  </div>          
            </div>
      </div>
           <div class="row col m12">
        <div class="col m6">
          {% with form.director as input %}
          <!-- input = form.nombre -->
            {% include 'includes/input.html' %} 
          {% endwith %}
        </div>
        <div class="col m6">
          {% with form.grupos as input %}
          <!-- input = form.nombre -->
            {% include 'includes/input.html' %} 
          {% endwith %}
        </div>
        </div>
           <div class="row col m12">
          <div class="col m12">
            {% with form.descripcion as input %}
            <!-- input = form.nombre -->
              {% include 'includes/input.html' %} 
            {% endwith %}
          </div>
          <div class="row col m12">
        <div class="col m6">
          {% with form.fecha_interpretacion as input %}
            {% include 'includes/input.html' %} 
          {% endwith %}
        </div>
        <div class="col m6">
          {% with form.valor_boleta as input %}
          <!-- input = form.nombre -->
            {% include 'includes/input.html' %} 
          {% endwith %}
        </div>
        </div>
        
        <div class="row col m12">
        <div class="col m6">
          {% with form.lugar as input %}
          <!-- input = form.nombre -->
            {% include 'includes/input.html' %} 
          {% endwith %}
        </div>
            </div>
            <div class="row col m12">
      <div class="col m12">
        <button type="submit" class="btn btn-primary pull-right" style="border-radius: 20px !important;">
          <i class="fa fa-save"></i> Guardar
        </button>
      </div>
       </div>
  </form>
{% endblock body %} 


{% block script %}
<script>
  $('#eliminar').on('click', function(e){
    let url = $(this).attr('data-target');
    e.preventDefault();
    {% if form.instance.estado %}
    swal({
      title: "¿Esta seguro?",
      text: '¿Esta por inactivar este proyecto, desea continuar?', 
      icon: "warning",
      buttons: ["Cancelar", "Inactivar"],
      dangerMode: true,
    })
    .then((willDelete) => {
      if (willDelete) {
        window.location.href = url;
      }
    });
    {% else %}
    window.location.href = url;
    {% endif %}
  });
</script>

<script>
  $('.datepicker').pickadate({
    selectMonths: true, 
    selectYears: 15,
    today: 'Hoy',
    clear: 'Limpiar',
    close: 'Ok',
    closeOnSelect: true
  });
  </script>
{% endblock %}